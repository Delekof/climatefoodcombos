<!DOCTYPE html>
<html>
<head>
  <title>Climate Food Combos</title>
  <script src="https://cdn.jsdelivr.net/gh/Delekof/climatefoodcombos/data.js"></script>
</head>
<body>

<h1>Climate Food Combos</h1>

<div class="slidecontainer">
  <p>Protein supply: <span id="proteinRDA"></span></p>
  <input type="range" min="50" max="200" value="120" class="slider" id="proteinRange">
</div>

<div class="slidecontainer">
  <p>Calorie supply: <span id="calorieRDA"></span></p>
  <input type="range" min="2000" max="3500" value="3000" class="slider" id="calorieRange">
</div>

<div class="slidecontainer">
  <p>"Empty" calories: <span id="emptycalorieRDA"></span></p>
  <input type="range" min="0" max="2000" value="1200" class="slider" id="emptycalorieRange">
</div>

<div>
  <p>Calories supply from protein: <span id="proteinpercalorieSupply"></span></p>
</div>

<button type="button" onclick="displayProteinFoods()">
  Click me to display protein foods* (*animals are friends not food).
</button>

<p id="demo1"></p>

<button type="button" onclick="displayCarbFoods()">
  Click me to display carbohydrate foods.
</button>

<p id="demo2"></p>

<script>
  function calculateProteinPerKcal(data) {
    for (let food in data) {
      let protein = data[food].protein;
      let kcal = data[food].kcal;
      data[food].protein_per_kcal = parseFloat((protein / kcal).toFixed(2));
    }
  }

  function displayProteinFoods() {
    document.getElementById('demo1').innerHTML = JSON.stringify(proteinFoods, null, 2);
  }

  function displayCarbFoods() {
    document.getElementById('demo2').innerHTML = JSON.stringify(carbFoods, null, 2);
  }

  var slider1 = document.getElementById("proteinRange");
  var output1 = document.getElementById("proteinRDA");
  output1.innerHTML = slider1.value; // Display the default slider value

  var slider2 = document.getElementById("calorieRange");
  var output2 = document.getElementById("calorieRDA");
  output2.innerHTML = slider2.value; // Display the default slider value

  var slider3 = document.getElementById("emptycalorieRange");
  var output3 = document.getElementById("emptycalorieRDA");
  output3.innerHTML = slider3.value; // Display the default slider value

  var protein_per_kcal_supply = document.getElementById("proteinpercalorieSupply");
  protein_per_kcal_supply.innerHTML = String((100 * 4 * slider1.value / (slider2.value - slider3.value)).toFixed(2)) + "%";

  slider1.oninput = function() {
    output1.innerHTML = this.value;
    protein_per_kcal_supply.innerHTML = String((100 * 4 * slider1.value / (slider2.value - slider3.value)).toFixed(2)) + "%";
  }

  slider2.oninput = function() {
    output2.innerHTML = this.value;
    protein_per_kcal_supply.innerHTML = String((100 * 4 * slider1.value / (slider2.value - slider3.value)).toFixed(2)) + "%";
  }

  slider3.oninput = function() {
    output3.innerHTML = this.value;
    protein_per_kcal_supply.innerHTML = String((100 * 4 * slider1.value / (slider2.value - slider3.value)).toFixed(2)) + "%";
  }

  // Ensure external data is processed correctly
  calculateProteinPerKcal(nutritional_data);

</script>

</body>
</html>
